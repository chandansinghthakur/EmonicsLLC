<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>SQL Data Display</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <h1>Total Employees</h1>
    <a href="{{ url_for('home') }}"> <img src="https://upload.wikimedia.org/wikipedia/commons/a/a6/Apple_Home_%28iOS%29.png" width="50" height="50"></a>
    <button class="button"><a href="{{ url_for('page1') }}">Dashboard</a></button>
    <button class="button"><a href="{{ url_for('about') }}">Live Employees</a></button>
    <button class="button"><a href="{{ url_for('summary') }}">Live Emp 1</a></span></button>
    <button class="button"><a href="{{ url_for('sep') }}">Separated Employees</a></button>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <form action="">
        <input type="text" id="searchBar" placeholder="Search here ...">
        <i class="fa fa-search"></i>
    </form>

    <table id="data-table" style="float:left">
        <thead>
            <tr class="Emp_status-row">
                <th>Emp_status</th>
                <th>Working_status</th>
                <th>DOJ</th>
                <th>DOL</th>
                <th>Emp_code</th>
                <th>User_name</th>
                <th>Reporting_manager</th>
                <th>Division</th>
                <th>Designation</th>
                <th>Email_id</th>
                <th>Assigned_ATS</th>
                <th>Primary_Extn_Number</th>
                <th>Secondary_Extn_Number</th>
                <th>Primary_Vonage_Number</th>
                <th>Secondary_Vonage_Number</th>
                <th>Department</th>
                <th>Personal_Number</th>
                <th>Personal_Email_ID</th>
                <th>Till_Date</th>
                <th>Total_Experience</th>
                <th>Remark</th>
                <th>TEAM</th>
                <th>Super_Team</th>
                <th>Gender</th>            
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                <td>{{ row.Emp_status }}</td>
                <td>{{ row.Working_status }}</td>
                <td>{{ row.DOJ }}</td>
                <td>{{ row.DOL }}</td>
                <td>{{ row.Emp_code }}</td>
                <td>{{ row.User_name }}</td>
                <td>{{ row.Reporting_manager }}</td>
                <td>{{ row.Division }}</td>
                <td>{{ row.Designation }}</td>
                <td>{{ row.Email_id }}</td>
                <td>{{ row.Assigned_ATS }}</td>
                <td>{{ row.Primary_Extn_Number }}</td>
                <td>{{ row.Secondary_Extn_Number }}</td>
                <td>{{ row.Primary_Vonage_Number }}</td>
                <td>{{ row.Secondary_Vonage_Number }}</td>
                <td>{{ row.Department }}</td>
                <td>{{ row.Personal_Number }}</td>
                <td>{{ row.Personal_Email_ID }}</td>
                <td>{{ row.Till_Date }}</td>
                <td>{{ row.Total_Experience }}</td>
                <td>{{ row.Remark }}</td>
                <td>{{ row.TEAM }}</td>
                <td>{{ row.Super_Team }}</td>
                <td>{{ row.Gender }}</td>
                    
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <script>
        const searchBar = document.getElementById('searchBar');
        const table = document.getElementById('data-table');
        const rows = table.getElementsByTagName('tr');

        searchBar.addEventListener('input', function() {
            const filter = searchBar.value.toLowerCase();

            for (let i = 1; i < rows.length; i++) {
                const rowData = rows[i].getElementsByTagName('td');
                let rowMatches = false;

                for (let j = 0; j < rowData.length; j++) {
                    const cellData = rowData[j].textContent.toLowerCase();
                    if (cellData.includes(filter)) {
                        rowMatches = true;
                        break;
                    }
                }

                rows[i].style.display = rowMatches ? '' : 'none';
            }
        });

    document.addEventListener("DOMContentLoaded", function () {
    const table = document.getElementById("data-table");
    const rows = table.getElementsByTagName("tr");

    // Start from index 1 to skip the header row
    for (let i = 1; i < rows.length; i++) {
        const statusCell = rows[i].getElementsByTagName("td")[0];
        if (statusCell) {
            const status = statusCell.textContent.trim().toLowerCase();
            let colorClass = "";

            if (status === "live") {
                colorClass = "green";
            } else {
                colorClass = "red";
            }

            rows[i].classList.add(colorClass);
        }
    }
});
    </script>
<div class="footer">
    <p>Created by Chandan Thakur</p>
</div>
</body>
</html>
